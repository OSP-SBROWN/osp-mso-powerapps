Screens:
  Scr_Add/EditHierVersion:
    Properties:
      Fill: =ColPal_GreyLight
      LoadingSpinner: =LoadingSpinner.Data
      LoadingSpinnerColor: =ColPal_Yellow
      OnVisible: =If(IsBlankOrError(Sel_HierarchyVersion_ID), Set(Sel_HierarchyVersion_ID,First(Col_HierarchyVersions).ID),false)
    Children:
      - ScreenContainer1_1:
          Control: GroupContainer@1.3.0
          Variant: AutoLayout
          Properties:
            Fill: =RGBA(0,0,0,0)
            Height: =Parent.Height
            LayoutAlignItems: =LayoutAlignItems.Stretch
            LayoutDirection: =LayoutDirection.Vertical
            LayoutGap: =10
            PaddingLeft: =10
            PaddingRight: =10
            PaddingTop: =10
            Width: =Parent.Width
          Children:
            - HeaderContainer1_1:
                Control: GroupContainer@1.3.0
                Variant: AutoLayout
                Properties:
                  Fill: =ColPal_PrussianBlue
                  FillPortions: =0
                  Height: =75
                  LayoutAlignItems: =LayoutAlignItems.Center
                  LayoutDirection: =LayoutDirection.Horizontal
                  LayoutGap: =20
                  PaddingLeft: =20
                  PaddingRight: =20
                  RadiusBottomLeft: =8
                  RadiusBottomRight: =8
                  RadiusTopLeft: =8
                  RadiusTopRight: =8
                Children:
                  - Image1_1:
                      Control: Image@2.2.3
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Height: =Parent.Height
                        Image: ='MSO Branding_Logotype White trans-01'
                        PaddingBottom: =Self.Height*0.1
                        PaddingTop: =Self.Height*0.1
                        Width: =225
                  - TextCanvas1_1:
                      Control: Text@0.0.51
                      Properties:
                        FillPortions: =2
                        Font: =Font.'Segoe UI'
                        FontColor: =ColPal_GreyLight
                        Height: =Parent.Height
                        Size: =Parent.Height*0.5
                        Text: ="Hierarchy Versions"
                        VerticalAlign: =VerticalAlign.Middle
                  - ButtonCanvas2_18:
                      Control: Button@0.0.45
                      Properties:
                        Appearance: ='ButtonCanvas.Appearance'.Outline
                        FontColor: =Color.White
                        Icon: ="Add"
                        OnSelect: |
                          =Set(Vis_HierVer_Add,true);
                          Set(Vis_HierVer_Edit,false);
                          Set(Vis_Hierver_Delete,false);
                        Text: ="Add New"
                        Width: =135
                  - CMB_HierVersion_1:
                      Control: DropDown@0.0.45
                      Properties:
                        DefaultSelectedItems: =If(!IsBlank(Sel_HierarchyVersion), [Sel_HierarchyVersion], [])
                        Items: =Col_HierarchyVersions
                        OnChange: =Set(Sel_HierarchyVersion, Self.Selected); Set(Sel_HierarchyVersion_ID, Self.Selected.ID)
                      Children:
                        - Name1_1:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="Name"
                              FieldName: ="Name"
                              FieldType: ="s"
                              Order: =1
                        - ID1_1:
                            Control: DropDownDataField@1.5.0
                            Variant: textualColumn
                            IsLocked: true
                            Properties:
                              FieldDisplayName: ="ID"
                              FieldName: ="ID"
                              FieldType: ="n"
                              Order: =2
                  - Icon2_1:
                      Control: Classic/Icon@2.5.0
                      Properties:
                        BorderColor: =RGBA(0, 18, 107, 1)
                        Color: =ColPal_White
                        Height: =40
                        HoverColor: =ColPal_Coral
                        Icon: =Icon.Cancel
                        OnSelect: |-
                          =Reset(TxtIn_NewHierVersion_Name);
                          Reset(CMB_HierVersion_ForDuplicate);
                          Reset(DD_NewHierarchyVersion_Status);
                          Navigate(HierarchyMan,ScreenTransition.Fade);
                        Tooltip: ="Cancel and go back"
                        Width: =40
            - MainContainer_1:
                Control: GroupContainer@1.3.0
                Variant: AutoLayout
                Properties:
                  DropShadow: =DropShadow.None
                  Fill: =RGBA(245, 245, 245, 1)
                  LayoutAlignItems: =LayoutAlignItems.Stretch
                  LayoutDirection: =LayoutDirection.Horizontal
                  LayoutGap: =16
                  LayoutWrap: =true
                  PaddingBottom: =2
                  PaddingLeft: =2
                  PaddingRight: =2
                  PaddingTop: =2
                Children:
                  - Container5_2:
                      Control: GroupContainer@1.3.0
                      Variant: AutoLayout
                      Properties:
                        Fill: =ColPal_White
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutGap: =12
                        PaddingBottom: =10
                        PaddingLeft: =10
                        PaddingRight: =10
                        PaddingTop: =10
                      Children:
                        - TextCanvas9_4:
                            Control: Text@0.0.51
                            Properties:
                              Font: =Font.Lato
                              FontColor: =ColPal_PrussianBlue
                              Size: =22
                              Text: ="Manage Versions"
                              Weight: ='TextCanvas.Weight'.Bold
                              Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                        - Gallery1_1:
                            Control: Gallery@2.15.0
                            Variant: BrowseLayout_Vertical_TwoTextOneImageVariant_ver5.0
                            Properties:
                              BorderColor: =RGBA(0, 18, 107, 1)
                              Items: =Col_HierarchyVersions
                              TemplateSize: =70
                            Children:
                              - Title1_1:
                                  Control: Label@2.5.1
                                  Properties:
                                    BorderColor: =RGBA(0, 0, 0, 1)
                                    Color: =RGBA(50, 49, 48, 1)
                                    Font: =Font.'Open Sans'
                                    FontWeight: =If(ThisItem.IsSelected, FontWeight.Semibold, FontWeight.Normal)
                                    Height: =27
                                    OnSelect: =Select(Parent)
                                    PaddingBottom: =0
                                    PaddingLeft: =0
                                    PaddingRight: =0
                                    PaddingTop: =0
                                    Size: =14
                                    Text: =ThisItem.Name
                                    VerticalAlign: =VerticalAlign.Top
                                    Width: =217
                                    X: =79
                                    Y: =22
                              - Separator1_1:
                                  Control: Rectangle@2.3.0
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    Fill: =RGBA(255, 255, 255, 1)
                                    Height: =8
                                    OnSelect: =Select(Parent)
                                    Width: =Parent.TemplateWidth
                                    Y: =Parent.TemplateHeight - Self.Height
                              - Circle2:
                                  Control: Circle@2.3.0
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    Fill: |-
                                      =Switch(ThisItem.Status,
                                          "Active", ColPal_Green,
                                          "Draft", ColPal_Yellow, 
                                          "Archive", ColPal_Red, 
                                          ColPal_GreyMid
                                      )
                                    Height: =Parent.TemplateHeight*0.4
                                    OnSelect: =Select(Parent)
                                    Width: =Self.Height
                                    X: =20
                                    Y: =Parent.TemplateHeight/2-(Self.Height/2)
                              - ButtonCanvas5_2:
                                  Control: Button@0.0.45
                                  Properties:
                                    BasePaletteColor: =ColPal_PrussianBlue
                                    Icon: ="Delete"
                                    OnSelect: |-
                                      =Set(Vis_HierVer_Edit,false);
                                      Set(Vis_HierVer_Add,false);
                                      Set(Vis_Hierver_Delete,true);
                                      Set(HierVer_Selected,ThisItem);
                                    Text: ="Delete"
                                    X: =427
                                    Y: =22
                              - ButtonCanvas5_3:
                                  Control: Button@0.0.45
                                  Properties:
                                    BasePaletteColor: =ColPal_PrussianBlue
                                    Icon: ="Edit"
                                    OnSelect: |-
                                      =Set(Vis_HierVer_Edit,true);
                                      Set(Vis_HierVer_Add,false);
                                      Set(HierVer_Selected,ThisItem);
                                    Text: ="Edit"
                                    X: =535
                                    Y: =21
                  - Cnt_HierVersion_Add:
                      Control: GroupContainer@1.3.0
                      Variant: AutoLayout
                      Properties:
                        Fill: =ColPal_White
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutGap: =12
                        PaddingBottom: =10
                        PaddingLeft: =10
                        PaddingRight: =10
                        PaddingTop: =10
                        Visible: =Vis_HierVer_Add
                      Children:
                        - Container6_9:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =50
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - TextCanvas9_9:
                                  Control: Text@0.0.51
                                  Properties:
                                    FillPortions: =1
                                    Font: =Font.Lato
                                    FontColor: =ColPal_PrussianBlue
                                    Size: =22
                                    Text: ="Add a New Version of the Hierarchy"
                                    Weight: ='TextCanvas.Weight'.Bold
                                    Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                              - Icon2_2:
                                  Control: Classic/Icon@2.5.0
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    Color: =ColPal_PrussianBlue
                                    Height: =40
                                    HoverColor: =ColPal_Coral
                                    Icon: =Icon.Cancel
                                    OnSelect: |
                                      =Set(Vis_HierVer_Add,false);
                                      Reset(TxtIn_NewHierVersion_Name);
                                      Reset(CMB_HierVersion_ForDuplicate);
                                      Reset(DD_NewHierarchyVersion_Status);
                                    Tooltip: ="Cancel and go back"
                                    Width: =40
                        - TabList_NewHierarchyVersion:
                            Control: TabList@2.2.31
                            Properties:
                              Items: =["Empty", "Duplicate From"]
                              Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                        - Container6_1:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =50
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - TextCanvas9_2:
                                  Control: Text@0.0.51
                                  Properties:
                                    FillPortions: =1
                                    Font: =Font.Lato
                                    FontColor: =ColPal_PrussianBlue
                                    Size: =18
                                    Text: ="Version Name"
                                    Weight: ='TextCanvas.Weight'.Bold
                                    Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                              - TxtIn_NewHierVersion_Name:
                                  Control: TextInput@0.0.54
                                  Properties:
                                    FillPortions: =2
                        - Container6_2:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =50
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - TextCanvas9_3:
                                  Control: Text@0.0.51
                                  Properties:
                                    FillPortions: =1
                                    Font: =Font.Lato
                                    FontColor: |-
                                      =Switch(TabList_NewHierarchyVersion.Selected.Value, 
                                          "Empty", ColPal_GreyMid, 
                                          "Duplicate From", ColPal_PrussianBlue, 
                                          ColPal_Coral
                                      )
                                    Size: =18
                                    Text: ="Source Version"
                                    Weight: ='TextCanvas.Weight'.Bold
                                    Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                              - CMB_HierVersion_ForDuplicate:
                                  Control: DropDown@0.0.45
                                  Properties:
                                    DefaultSelectedItems: =If(!IsBlank(Sel_HierarchyVersion), [Sel_HierarchyVersion], [])
                                    DisplayMode: |-
                                      =Switch(TabList_NewHierarchyVersion.Selected.Value,
                                          "Empty", DisplayMode.Disabled,
                                          "Duplicate From", DisplayMode.Edit,
                                          DisplayMode.Disabled
                                      )
                                    Items: =Col_HierarchyVersions
                                    OnChange: =
                                  Children:
                                    - Name1_2:
                                        Control: DropDownDataField@1.5.0
                                        Variant: textualColumn
                                        IsLocked: true
                                        Properties:
                                          FieldDisplayName: ="Name"
                                          FieldName: ="Name"
                                          FieldType: ="s"
                                          Order: =1
                                    - ID1_2:
                                        Control: DropDownDataField@1.5.0
                                        Variant: textualColumn
                                        IsLocked: true
                                        Properties:
                                          FieldDisplayName: ="ID"
                                          FieldName: ="ID"
                                          FieldType: ="n"
                                          Order: =2
                        - Container6_3:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =50
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - TextCanvas9_5:
                                  Control: Text@0.0.51
                                  Properties:
                                    FillPortions: =1
                                    Font: =Font.Lato
                                    FontColor: =ColPal_PrussianBlue
                                    Size: =18
                                    Text: ="Status"
                                    Weight: ='TextCanvas.Weight'.Bold
                                    Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                              - DD_NewHierarchyVersion_Status:
                                  Control: DropDown@0.0.45
                                  Properties:
                                    DefaultSelectedItems: =["Draft"]
                                    Items: =StatusItems
                        - Container6_4:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =50
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - ButtonCanvas5:
                                  Control: Button@0.0.45
                                  Properties:
                                    BasePaletteColor: =ColPal_PrussianBlue
                                    FillPortions: =1
                                    OnSelect: |-
                                      =Set(Vis_HierVer_Add,false);
                                      Reset(TxtIn_NewHierVersion_Name);
                                      Reset(CMB_HierVersion_ForDuplicate);
                                      Reset(DD_NewHierarchyVersion_Status);
                                    Text: ="Cancel"
                              - ButtonCanvas5_1:
                                  Control: Button@0.0.45
                                  Properties:
                                    BasePaletteColor: =ColPal_PrussianBlue
                                    DisplayMode: |-
                                      =Switch(TabList_NewHierarchyVersion.Selected.Value,
                                          "Empty", DisplayMode.Disabled,
                                          "Duplicate From", DisplayMode.Edit,
                                          DisplayMode.Disabled
                                      )
                                    FillPortions: =1
                                    OnSelect: |
                                      =

                                      With(
                                          {
                                              SQL: s.tidyHierMan2CreateHierarchyVersion(
                                                  {
                                                      DuplicateFromExisting_ID: Switch(
                                                          TabList_NewHierarchyVersion.Selected.Value,
                                                          "Empty",
                                                          0,
                                                          "Duplicate From",
                                                          CMB_HierVersion_ForDuplicate.Selected.ID,
                                                          0
                                                      ),
                                                      CreatedBy: User().Email,
                                                      VersionStatus: DD_NewHierarchyVersion_Status.Selected.Value,
                                                      VersionName: TxtIn_NewHierVersion_Name.Value
                                                  }
                                              )
                                          },
                                          /* Status text */
                                          Set(
                                              StatusText,
                                              Coalesce(
                                                  SQL.OutputParameters.SQL_Message,
                                                  "No message returned"
                                              )
                                          );
                                          /* Status colour */
                                      Set(
                                              StatusColour,
                                              Switch(
                                                  // Handle true/false or 1/0 or 'Y'/'N'
                                                  Text(SQL.OutputParameters.SQL_Success),
                                                  "true",
                                                  ColPal_Green,
                                                  "1",
                                                  ColPal_Green,
                                                  "Y",
                                                  ColPal_Green,
                                                  "false",
                                                  ColPal_Coral,
                                                  "0",
                                                  ColPal_Coral,
                                                  "N",
                                                  ColPal_Coral,
                                                  ColPal_Yellow
                                              )
                                          );
                                          /* Update selection */
                                      Set(
                                              Sel_HierarchyVersion_ID,
                                              SQL.OutputParameters.NewHierarchyVersion_ID
                                          );
                                          /* Refresh whatever needs updating â€” replace with the right call(s) */
                                      Reset(Func_GetHierarchyVersions_1);
                                          Reset(CMB_HierVersion);
                                          Reset(CMB_HierVersion_1);
                                          Reset(Func_FetchHierarchy_1)
                                      );
                                      Reset(TxtIn_NewHierVersion_Name);
                                      Reset(CMB_HierVersion_ForDuplicate);
                                      Reset(DD_NewHierarchyVersion_Status);
                                      Navigate(
                                          HierarchyMan,
                                          ScreenTransition.Fade
                                      );
                                    Text: ="Save"
                              - InfoButtonCanvas1:
                                  Control: InfoButton@0.0.32
                                  Properties:
                                    Content: ="Creating empty hierarchy versions is not currently supported. In most cases, we recommend that you Duplicate From an existing version. If you need to create an entirely new version, please contact OSP, who will be able to do this from a spreadsheet for you."
                                    Visible: |-
                                      =Switch(TabList_NewHierarchyVersion.Selected.Value,
                                          "Empty", true,
                                          "Duplicate From", false,
                                          false
                                      )
                  - Cnt_HierVersion_Edit:
                      Control: GroupContainer@1.3.0
                      Variant: AutoLayout
                      Properties:
                        Fill: =ColPal_White
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutGap: =12
                        PaddingBottom: =10
                        PaddingLeft: =10
                        PaddingRight: =10
                        PaddingTop: =10
                        Visible: =Vis_HierVer_Edit
                      Children:
                        - Container6_10:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =50
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - TextCanvas9_10:
                                  Control: Text@0.0.51
                                  Properties:
                                    FillPortions: =1
                                    Font: =Font.Lato
                                    FontColor: =ColPal_PrussianBlue
                                    Size: =22
                                    Text: ="Edit Hierarchy Version"
                                    Weight: ='TextCanvas.Weight'.Bold
                                    Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                              - Icon2_3:
                                  Control: Classic/Icon@2.5.0
                                  Properties:
                                    BorderColor: =RGBA(0, 18, 107, 1)
                                    Color: =ColPal_PrussianBlue
                                    Height: =40
                                    HoverColor: =ColPal_Coral
                                    Icon: =Icon.Cancel
                                    OnSelect: =Set(Vis_HierVer_Edit,false);
                                    Tooltip: ="Cancel and go back"
                                    Width: =40
                        - Container6_5:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =50
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - TextCanvas9_6:
                                  Control: Text@0.0.51
                                  Properties:
                                    FillPortions: =1
                                    Font: =Font.Lato
                                    FontColor: =ColPal_PrussianBlue
                                    Size: =18
                                    Text: ="Version Name"
                                    Weight: ='TextCanvas.Weight'.Bold
                                    Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                              - TextIn_VerEdit_Name:
                                  Control: TextInput@0.0.54
                                  Properties:
                                    FillPortions: =2
                                    Value: =HierVer_Selected.Name
                        - Container6_7:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =50
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - TextCanvas9_8:
                                  Control: Text@0.0.51
                                  Properties:
                                    FillPortions: =1
                                    Font: =Font.Lato
                                    FontColor: =ColPal_PrussianBlue
                                    Size: =18
                                    Text: ="Status"
                                    Weight: ='TextCanvas.Weight'.Bold
                                    Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                              - DD_Status_EditVer:
                                  Control: DropDown@0.0.45
                                  Properties:
                                    DefaultSelectedItems: =LookUp(StatusItems,Value=HierVer_Selected.Status)
                                    FillPortions: =1
                                    Items: =StatusItems
                        - Container6_6:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =50
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - TextCanvas9_7:
                                  Control: Text@0.0.51
                                  Properties:
                                    FillPortions: =1
                                    Font: =Font.Lato
                                    FontColor: =ColPal_PrussianBlue
                                    Size: =18
                                    Text: ="Created Date/Time"
                                    Weight: ='TextCanvas.Weight'.Bold
                                    Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                              - TextInputCanvas2_1:
                                  Control: TextInput@0.0.54
                                  Properties:
                                    FillPortions: =2
                                    Value: =HierVer_Selected.CreatedDate
                        - Container6_11:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =50
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - TextCanvas9_11:
                                  Control: Text@0.0.51
                                  Properties:
                                    FillPortions: =1
                                    Font: =Font.Lato
                                    FontColor: =ColPal_PrussianBlue
                                    Size: =18
                                    Text: ="Created By"
                                    Weight: ='TextCanvas.Weight'.Bold
                                    Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                              - TextInputCanvas2_2:
                                  Control: TextInput@0.0.54
                                  Properties:
                                    FillPortions: =2
                                    Value: =HierVer_Selected.CreatedBy
                        - Container6_8:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =50
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - ButtonCanvas5_4:
                                  Control: Button@0.0.45
                                  Properties:
                                    BasePaletteColor: =ColPal_PrussianBlue
                                    FillPortions: =1
                                    OnSelect: =
                                    Text: ="Cancel"
                              - ButtonCanvas5_5:
                                  Control: Button@0.0.45
                                  Properties:
                                    BasePaletteColor: =ColPal_PrussianBlue
                                    FillPortions: =1
                                    OnSelect: |-
                                      =With({SQL: s.tidyHierMan2UpdateHierarchyVersion({HierarchyVersion_ID:HierVer_Selected.ID, Status:DD_Status_EditVer.Selected.Value,VersionName:TextIn_VerEdit_Name.Value})}, 
                                          If(SQL.OutputParameters.SQL_Success=true, 
                                              Set(StatusText,SQL.OutputParameters.SQL_Message);
                                              Set(StatusColour, ColPal_Green);
                                              Reset(Func_GetHierarchyVersions_1);
                                              Set(Vis_HierVer_Edit,false);
                                              , 
                                              Set(StatusText, SQL.OutputParameters.SQL_Message);
                                              Set(StatusColour,ColPal_Red)
                                          )
                                          );
                                    Text: ="Save"
                  - Cnt_HierVersion_Edit_1:
                      Control: GroupContainer@1.3.0
                      Variant: AutoLayout
                      Properties:
                        Fill: =ColPal_Red
                        LayoutDirection: =LayoutDirection.Vertical
                        LayoutGap: =12
                        LayoutJustifyContent: =LayoutJustifyContent.Center
                        PaddingBottom: =10
                        PaddingLeft: =10
                        PaddingRight: =10
                        PaddingTop: =10
                        Visible: =Vis_Hierver_Delete
                      Children:
                        - Icon3_1:
                            Control: Icon@0.0.7
                            Properties:
                              AlignInContainer: =AlignInContainer.Center
                              Height: =150
                              Icon: ="Warning"
                              IconColor: =ColPal_White
                              Width: =150
                        - TextCanvas10:
                            Control: Text@0.0.51
                            Properties:
                              Align: ='TextCanvas.Align'.Center
                              AlignInContainer: =AlignInContainer.Start
                              FontColor: =ColPal_White
                              Height: =50
                              Size: =32
                              Text: ="Are you sure?"
                              VerticalAlign: =VerticalAlign.Middle
                              Weight: ='TextCanvas.Weight'.Bold
                              Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                        - TextCanvas10_1:
                            Control: Text@0.0.51
                            Properties:
                              Align: ='TextCanvas.Align'.Start
                              AlignInContainer: =AlignInContainer.Start
                              FontColor: =ColPal_White
                              Height: =175
                              Size: =22
                              Text: =$"This action will delete {HierVer_Selected.Name} and all associated data. You will need to re-assign a hierarchy to any reports with this assignment before you can re-run them."
                              VerticalAlign: =VerticalAlign.Middle
                              Weight: ='TextCanvas.Weight'.Regular
                              Width: =Parent.Width-(Parent.PaddingLeft+Parent.PaddingRight)
                        - Container6_17:
                            Control: GroupContainer@1.3.0
                            Variant: AutoLayout
                            Properties:
                              DropShadow: =DropShadow.None
                              FillPortions: =0
                              Height: =100
                              LayoutAlignItems: =LayoutAlignItems.Center
                              LayoutDirection: =LayoutDirection.Horizontal
                              LayoutGap: =12
                            Children:
                              - ButtonCanvas5_6:
                                  Control: Button@0.0.45
                                  Properties:
                                    Appearance: ='ButtonCanvas.Appearance'.Outline
                                    BasePaletteColor: =ColPal_PrussianBlue
                                    BorderColor: =ColPal_White
                                    FillPortions: =1
                                    FontColor: =ColPal_White
                                    FontSize: =18
                                    Height: =50
                                    OnSelect: |
                                      =Set(Vis_HierVer_Add,false);
                                      Set(Vis_HierVer_Edit,false);
                                      Set(Vis_Hierver_Delete,false);
                                    Text: ="No, go back!"
                              - ButtonCanvas5_7:
                                  Control: Button@0.0.45
                                  Properties:
                                    Appearance: ='ButtonCanvas.Appearance'.Outline
                                    BasePaletteColor: =ColPal_PrussianBlue
                                    BorderColor: =ColPal_White
                                    FillPortions: =1
                                    FontColor: =ColPal_White
                                    FontSize: =18
                                    Height: =50
                                    OnSelect: |-
                                      =With({SQL: s.tidyHierMan2Delete2({HierarchyVersion_ID:HierVer_Selected.ID})}, 
                                          Set(StatusText, SQL.OutputParameters.SQL_Message);
                                          Set(StatusColour,If(SQL.OutputParameters.SQL_Success=true, ColPal_Green,ColPal_Red))
                                      );
                                      Reset(Func_GetHierarchyVersions_1);
                                      Set(Vis_HierVer_Add,false);
                                      Set(Vis_HierVer_Edit,false);
                                      Set(Vis_Hierver_Delete,false);
                                      Navigate(HierarchyMan,ScreenTransition.Fade);
                                    Text: ="I'm sure, delete it."
            - Component1_2:
                Control: CanvasComponent
                ComponentName: StatusBar
                Properties:
                  Height: =50
                  Width: =App.DesignWidth
      - TextCanvas5_1:
          Control: Text@0.0.51
          Properties:
            Fill: =RGBA(214, 221, 224, 1)
            FontColor: =RGBA(13, 50, 61, 1)
            Height: =75
            Size: =16
            Text: ="Update screens all working. Create Add New Screens, Delete Screens, including handling child nodes when deleting."
            Visible: =false
            Weight: ='TextCanvas.Weight'.Semibold
            Width: =579
            X: =786
            Y: =693
